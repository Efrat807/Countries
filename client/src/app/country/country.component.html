<div class="header">
	<h1 class="title">Countries</h1>
</div>
@if (error$ | async) {
	
	<p style="color: red; font-size: large;">{{error$| async}}</p>
}
@else {
	<div class="table">
		<table mat-table [dataSource]="sortedData" matSort (matSortChange)="sortData($event)">
			
			<ng-container matColumnDef="name">
				<th mat-header-cell *matHeaderCellDef mat-sort-header>name</th>
				<td mat-cell *matCellDef="let country">{{ country.name.common }}</td>
			</ng-container>

			<ng-container matColumnDef="capital">
				<th mat-header-cell *matHeaderCellDef mat-sort-header>capital</th>
				<td mat-cell *matCellDef="let country">{{ country.capital }}</td>
			</ng-container>

			<ng-container matColumnDef="region">
				<th mat-header-cell *matHeaderCellDef mat-sort-header>region</th>
				<td mat-cell *matCellDef="let country">{{ country.region }}</td>
			</ng-container>

			<ng-container matColumnDef="subRegion">
				<th mat-header-cell *matHeaderCellDef mat-sort-header>subRegion</th>
				<td mat-cell *matCellDef="let country">{{ country.subRegion }}</td>
			</ng-container>

			<ng-container matColumnDef="population">
				<th mat-header-cell *matHeaderCellDef mat-sort-header>population</th>
				<td mat-cell *matCellDef="let country">{{ country.population }}</td>
			</ng-container>

			<ng-container matColumnDef=">">
				<th mat-header-cell *matHeaderCellDef></th>
				<td mat-cell *matCellDef="let country">
					<button mat-flat-button class="moreBtn" (click)="onButtonClick(country)" style="background-color: transparent;">
						<div class="details">
							<p style="padding-top: 15%;">Details</p>
							<mat-icon  aria-label="back" fontIcon="chevron_right"></mat-icon>
						</div>					
					</button>
				</td>
			</ng-container>

			<tr mat-header-row *matHeaderRowDef="columnsToDisplay" style="background-color: #f2f2f2; font-size: 16px;  border-bottom: 2px solid gray;
			padding: 12px 16px;"></tr>
			<tr mat-row *matRowDef="let myRowData; columns: columnsToDisplay" (dblclick)="onButtonClick(myRowData)"></tr>
	</table>
</div>
} 


